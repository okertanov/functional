<h5>Краткая компиляция irc-чата в рамках Ubuntu Open Week на тему "Encrypted Private Directories" </h5>
    <a href="https://wiki.ubuntu.com/MeetingLogs/openweekintrepid/PrivateDirectories">Зашифрованные личные каталоги</a>. Докладчик: <a href="https://launchpad.net/~kirkland">Dustin Kirkland</a>

Перед нами снова представитель Ububtu Server Team с увлекательным, но слегка поверхностным докладом о остоянии дел в криптографии для конечных пользователей Убунту. С момента выхода Intrepid Ibex пользователям стало проще сохранять свои маленькие секреты в тайне. Стать великим параноиком легко и непринужденно можно так:
<habracut />
<code>
    $ sudo apt-get update
    $ sudo apt-get install ecryptfs-utils
    $ ecryptfs-setup-private
</code>
Ок, после установки ecryptfs-utils в системе появится PAM-модуль <i>pam_ecryptfs</i>. Когда при входе в систему вы вводите свой пароль, этот модуль использует его для расшифровки <i>~/.ecryptfs/wrapped-passphrase</i> файла, который содержит следующую парольную фразу для монтирования утилитой <i>/sbin/mount.ecryptfs_private</i>. Эта setuid-ная утилита делает то, что и положено делать с таким названием - монтирует <i>~/.Private</i> в <i>~/Private</i>, используя при этом специальную файловую систему, называемую <b>ecryptfs</b>. Это <a href="https://launchpad.net/ecryptfs ">Enterprise Cryptographic Filesystem</a>, разработанная парнями из IBM.  Существуют и другие решения такого плана, например, encfs, truecrypt, dmcrypt и другие. Но для реализации шифрования <i>~/Private</i> была выбрана ecryptfs и вот почему:
  <ul>
    <li>она уже в ядре с 2.6.19 во многих дистрибутивах (сейчас уже .28)</li>
    <li>  множество экспертов работают над нею, прошла ревью как комьюнити так и дистростроителей</li>
    <li>  она никуда не исчезнет, что немаловажно для надежного и долгосрочного хранения данных</li>
    <li>  ядерное криптование "теоретически" быстрее юзерспейсного</li>
    <li>  основана на проверенных специалистами и временем "ядерных" алгоритмах шифрования</li>
    <li>  криптуется индивидуально каждый файл ФС, в отличие от блочного шифрования</li>
</ul>
Oops! Рассмотрим последний пункт, уж очень спорное заявление. Ведь другие решения позволяют полностью шифровать раздел или даже все устройство, например, раздел свопа или том LVM. Но для пользовательского <i>~/Private</i> подход с шифрованием каждого файла ФС отдельно имеет одно значительное преимущество - инкрементный бэкап хранимых данных. Например, пользователь может просто <b>rsync -aP .Private</b> на удаленный сервер, и будет наверняка уверен, что даже root удаленного бекап-сервера не сможет получить доступ к содержимому бекапа. Ну разве только к имени файлов, которые пока что в текущей реализации не шифруются. Работа над этим идет и в Jaunty можно ожидать появления такого функционала.

<b>Вопрос</b>: Что случится с <b>ecryptfs</b> при автологоне пользователя? <b>Ответ</b>: Да, так как вы входите автоматически, то не вводите пароль, поэтому ваша <i>Private</i> не монтируется как следует. Но такое поведение и предусмотрено дизайном. А фактически при автологоне происходит вот что: вы заходите файловым менеджером в каталог <i>Private</i> и видите только ссылку на приложение вида "Access Your Private Data". По линку происходит запуск <i>/usr/bin/ecryptfs-mount-private</i> приложения, которое спрашивает ваш пароль на вход в систему, затем происходит монтирование.
<b>Вопрос</b>: А как по поводу производительности? <b>Ответ</b>: У автора нету проблем с производительностью. Он предполагает, что если компилировать в <i>~/Private</i> то, возможно, 10% потеря производительности может иметь место. Далее автор раскрывает вполне разумную мысль: с точки зрения производительности, тотально закриптовать весь раздел это одно, а выбрать и поместить в <i>~/Private</i> чувствительные к сокрытию доступа данные - совсем другое. Вы сами решаете за сохранность каких данные готовы платить понижением производительности доступа. Еще криптование LVM требует пароля при загрузке, что для удаленного сервера не есть гуд.
<b>Вопрос</b>: Почему бы не шифровать весь Домик пользователя? <b>Ответ</b>: У них была идея, но пока не все так просто. Будут думать дальше, расширять функционал, делать удобнее. Как сейчас? А вот так:
<code>    ln -s /home/kirkland/Private/.ssh /home/kirkland/.ssh</code>
<b>Вопрос</b>: Будут ли разработаны графические инструменты? <b>Ответ</b>: да, наверное, в Jaunty.
<b>Вопрос</b>: Что с физическими ключами для криптования? Может применять USB-флешки для хранения ключей? <b>Ответ</b>: <b>ecryptfs</b> поддерживает гибкое управление ключами для криптования:
<ol>
    <li>  pkcs11-helper</li>
    <li>  openssl</li>
    <li>  passphrase</li>
    <li>  tspi</li>
</ol>
Пока что используется только passphrase. Для начала можно просто скопировать <i>~/.ecryptfs/wrapped-passphrase</i> на флешку, затем установить на него симлинк. Возможно идея получит развитие в дальнейшем! Еще будут вестись инфраструктурные работы в самой Убунте по поддержке аппаратных карт OpenGPG, чипов Trusted Computing, ридеров биометрии(fingerprint).

Далее в чате идет демонстрация простого примера по доступу к своим данным на гостевой машине и <a href=" https://wiki.ubuntu.com/EncryptedPrivateDirectory">ссылки</a> на <a href="http://help.ubuntu.com/community/EncryptedPrivateDirectory">дополнительную информацию</a>.

Отведенный на эту замечательную тему час закончился. Автор и слушатели обменялись любезностями и распрощались.

